# 2. Sistema de control de stock ENBLAU(EN PROCESO)

---

## 1. Propósito

El presente manual está diseñado para usuarios nuevos en el sistema de control de stock utilizado por los Clientes y Endades. El objetivo principal es proporcionar una guía detallada para la gestión eficiente de proyectos, desde la creación de pedidos hasta la optimización del proceso de producción. Este documento abarca los pasos necesarios para realizar las operaciones clave del sistema y está estructurado de forma secuencial para facilitar su comprensión.

---

## 2. Gestión pedidos de compra

### 2.1. Pedidos de compra

- Desde el menú principal **Compras**, navegue a la sección "Pedidos de Compra".
- Especifique los materiales requeridos y su cantidad.
- En caso de cambios en las referencias, añádalas manualmente si están configuradas en la base de datos.
- En el pedido de venta (en la sección de **Venta**) selecciona el documento e ir a la pestaña **Material necesario** para sacar el listado de los materiales del pedido.
  - Puedes indicar si quieres o no comprar, por si ya tienes en almacén. Te mostrará para cada material la información: unidades en stock, unidades reservadas, unidades pendientes.

  ![material_necesario](Imagenes/PR_Stock_Control/material_necesario.jpg)

- Confirma en **Pedir material** y envía el pedido al proveedor correspondiente.

- En el apartado de **Almacenes** tienes una opcion **Pendiente de recibir** donde te muestra un listado donde se puede visualizar los materiales pendente de recibir para cada proyecto y pedido de compra.

  ![pendientes_recibir](Imagenes/PR_Stock_Control/pendiente_recibir.jpg)

- Sobre la linea del articulo con el botón derecho puedes abrir el pedido de compra para ese material:

  ![pendientes_recibir](Imagenes/PR_Stock_Control/pendiente_recibir2.jpg)

> **Nota:** Para información mas detalladas sobre pedido de compras, sigue este enlace: [Pedidos de Compras](1.PR_Ventas_Compras.md#4-compras)

**¡Importante!** Para hacer el pedido de materiales en el documento de venta, en algunos casos se requieren permisos especiales para realizar compras. Este permiso también es necesario para fabricar o instalar.

![Permisos especiales](Imagenes/PR_Stock_Control/permisos_especiales.jpg)

### 2.2. Asignar materiales a proyecto

- Desde Material necesario en el proceso de listar y pedir materiales, tienes la opción, según la necesidad, de asignar artículos de otro proyecto al proyecto en el que estás. Desde el apartado de ubicaciones Botón derecho sobre la línea - **Asignar**:

  ![Asignar articulos](Imagenes/PR_Stock_Control/asignar.jpg)

  - Indicar el proyecto de destino a asignar (por defecto es en el que estás) y la cantidad (por defecto la que necesitas para el proyecto):
  
  ![Asignar articulos](Imagenes/PR_Stock_Control/asignar2.jpg)

  - Al asignar el artículo al proyecto en el que estás, automáticamente cambiará la unidad de stock al proyecto de destino, sumando la cantidad asignada, y al proyecto de origen se le restará. El artículo se pondrá en color verde.   

> **¡Importante!** Asegúrate de que se puedan utilizar materiales del proyecto desde el que se desea hacer el traspaso de los artículos.

### 2.3. Materiales reservados

- Desde un documento de **Ventas**, **Compras** y en **Proyectos**, se pueden reservar materiales para el proyecto, indicando en **Materiales reservados** desde el desplegable de **Almacén**.

  ![material_reservado](Imagenes/PR_Stock_Control/material_reservado.jpg)

- Abrirá una ventana de Material reservado y desde el apartado **Material de proyecto** puedes arrastrar los materiales de los pedidos al proveedor:

  ![material_reservado](Imagenes/PR_Stock_Control/material_reservado_2.jpg)

- Luego en el apartado de Almacenes se pueden ver todos los materiales reservados de un proyecto:

  ![material_reservado](Imagenes/PR_Stock_Control/material_reservado_3.jpg)

  ![material_reservado](Imagenes/PR_Stock_Control/material_reservado_4.jpg)

- En **Compras** hay una opción más en el desplegable de almacén llamada **Reposición de stock**, donde se mostrará un listado de bajo mínimo y bajo habitual.

  ![reposicion_stock](Imagenes/PR_Stock_Control/reposicion_stock.jpg)

  ![reposicion_stock](Imagenes/PR_Stock_Control/reposicion_stock2.jpg)

> **Nota:** El uso de material reservado es algo visual, eso no impedirá que se usen los materiales aunque estén reservados. Se recomienda el uso de [Asignar materiales a proyecto](#22-asignar-materiales-a-proyecto) si quieres tener un mejor control de stock.

### 2.4. Artículos

- En el pedido de compras, en la pestaña **Detalle** en la cinta lateral derecha, verás que hay una sección ubicada en la parte inferior llamada **Artículos** y **Artículos importados**.
  - **Artículos**: Son materiales propios creados desde en **MATERIAL**.

  ![articulos](Imagenes/PR_Stock_Control/articulos.jpg)

  - **Artículos importados**: Son los materiales importados de los proyectos de **Logikal**. Son los mismos materiales que están también en Almacén **Materiales importados**.

  ![articulos_importados](Imagenes/PR_Stock_Control/articulos_importados.jpg)

---

## 3. Gestión de almacenes y movimientos

### 3.1. Almacenes Layout

- En el menú principal de **Almacenes** - **Stock**, puedes añadir o editar los almacenes.

  ![almacenes](Imagenes/PR_Stock_Control/almacen.jpg)

- Configura el layout del almacén desde la página inicial: **ENBLAU** – **Configuración** – **Almacén** – **Layout**:

  ![almacen_layout](Imagenes/PR_Stock_Control/almacen_layout.jpg)

  - Crea zonas, estanterías y posiciones en el sistema para una organización clara. Se mostrará como vista de árbol.
  - Relaciona cada posición con su correspondiente área de almacenamiento. Ejemplo:
    - **Añadir Planta**: Añade una planta y puedes indicar el almacén.
    - **Añadir Zona/SubZona**: Se añade una zona o subzona debajo de la ubicación seleccionada.

    ![almacen_layout](Imagenes/PR_Stock_Control/almacen_layout2.jpg)


### 3.2. Stock

- En el apartado de **Almacenes - Stock** tienes el listado con las opciones **Resumen, Resumen con ubicacion y Detallado**:

  ![Stock](Imagenes/PR_Stock_Control/stock.jpg)

  ![Listado](Imagenes/PR_Stock_Control/listado.jpg)

  - **Resumen:** En ese listado podras ver de una manera resumida un material agrupado por proyecto asignado:

    ![Resumen](Imagenes/PR_Stock_Control/resumen.jpg)

  - **Resumen con ubicación:** En ese listado podras ver de una manera resumida un material agrupado por proyecto asignado y su ubicación:

    ![Resumen con ubicacion](Imagenes/PR_Stock_Control/resumen_ubicacion.jpg)

  - **Detallado:** En ese listado podras ver de una manera mas detallada donde muestra un material con su proyecto de compra, proyecto asignado, ubicacion en almacén y separado por documento de albaran de compra:

    ![Resumen con ubicacion](Imagenes/PR_Stock_Control/detallado.jpg)


### 3.3. Movimientos en almacén

- Realiza movimientos de materiales entre zonas y proyectos:
  - En **Almacenes** - **Stock** – **Detallado**, haz clic derecho sobre el material que quieras traspasar, descontar o asignar.

  ![Detallado](Imagenes/PR_Stock_Control/movimientos_detallado.jpg)

  - Selecciona el material desde el proyecto.
  - **Descontar**: Indica el proyecto, número del pedido, responsable y cantidad (barras y piezas) o longitud (juntas).

    ![Movimiento](Imagenes/PR_Stock_Control/descontar.jpg)

  - **Traspaso**: Indica la ubicación de origen, destino, cantidad (barras y piezas) o longitud (juntas).

    ![Traspaso](Imagenes/PR_Stock_Control/asignar3.jpg)

  - **Asignar**: Indica el proyecto de destino, responsable, cantidad (barras y piezas) o longitud (juntas). Esa funcion es la misma del apartado de Material necesario -[Asignar materiales a proyecto](#22-asignar-materiales-a-proyecto).

    ![Asignar](Imagenes/PR_Stock_Control/traspaso.jpg) 

- Los movimientos de entrada, salida, traspaso y asignación de cada material se reflejarán en el **Albarán**. Se puede ver las entradas y salidas en **Almacén – Movimientos**.

    ![Movimentos del almacen](Imagenes/PR_Stock_Control/movimentos_almacen.jpg)

    ![Movimentos del almacen](Imagenes/PR_Stock_Control/movimentos_almacen2.jpg)

- Desde Movimentos de almacén hay una funcion que es **Devolver**. Click con el boton derecho sobre el movimento de salida que deseas hacer y aparecera la opcion de devolver:

    ![Devolver](Imagenes/PR_Stock_Control/devolver.jpg)

  Abrira una ventana **Movimiento de devolución** donde indicas las unidades y la ubicacion que quieres devolver del material, por defecto es la ubicacion de donde has dado salida a ese material:

    ![Devolver](Imagenes/PR_Stock_Control/devolver2.jpg)

    
### 3.4. Informes de almacenes (inventario)

- En el apartado de **Almacenes** - **Stock** se puede imprimir diferentes tipos de informes:

  - **Resumen:** Hay dos informes **Inventario** y **Inventario por fecha**.

    ![Listado informes](Imagenes/PR_Stock_Control/informes.jpg)

    **Inventario** muestra un informe de inventario, seguún los filtros aplicado en el listado de almacén. Icluye las columnas Artículo, Proyecto Unidades, Unidades pendientes y Unidades reservadas.

      ![Inventario](Imagenes/PR_Stock_Control/inventario.jpg)

    **Inventario por fecha** muestra un informe de inventario en la fecha escogida. Incluye las columnas Artículo, Decripción, Unidades y Importe.

      ![Inventario por fecha](Imagenes/PR_Stock_Control/inventario_fecha.jpg)

  - **Resumen con ubicación:**


  - **Detallado:** Hay un informe **Inventario detallado**.
  
    **Inventario detallado** muestra un informe de inventario, seguún los filtros aplicado en el listado de almacén detallado. Incluye Proyecto, Número del albaran de compra, Ubicacion almacén, Artículo, Descrpción y Unidades. 

      ![Inventario detallado](Imagenes/PR_Stock_Control/inventario_detallado.jpg)

  - En el apartado de **Almacenes** - **Movimientos de almacén** se puede imprimir diferentes tipos de informes:

    ![Listado informes](Imagenes/PR_Stock_Control/informes_movimientos.jpg)

    **Movimientos** muestra un listado de los movimientos vizualizados en el listado de movimientos. Incluye Fecha del movimiento, Responsable, Proyecto asignado, Ubicacion almacén, Artículo, Descripción, Unidades y Tipo de movimiento.

      ![Listado informes](Imagenes/PR_Stock_Control/informes_movimientos2.jpg)

    **Movimientos I** muestra un listado de los movimientos vizualizados en el listado de movimientos. Incluye las columnas Tipo de movimiento, Fecha del movimiento, Responsable, Documento, Unidades, Importe, Artículo y Descripción.

      ![Listado informes](Imagenes/PR_Stock_Control/informes_movimientos3.jpg)

 ---   
<!-- ## 4. Recepción de materiales enSITE (MANUAL SEPARADO)

- En **Almacenes**, acceda a la opción **"Pendientes de Recibir"**. Se abrirá una pestaña con todos los materiales pendientes de recibir para cada proyecto.

![pendientes_recibir](Imagenes/PR_Stock_Control/pendiente_recibir.jpg)
![pendientes_recibir](Imagenes/PR_Stock_Control/pendiente_recibir2.jpg)

- **Modo de recibir**: Se puede hacer desde ENBLAU, pero se recomienda hacerlo desde la app **enSite** en taller.
- Abra **enSite** desde el taller a través de Wi-Fi con la persona encargada de recibir el pedido.
- En **Recepción de pedidos**, localice el pedido correspondiente (ordenado por fecha).

![recepcion_pedido](Imagenes/PR_Stock_Control/recepcion_pedido.jpg)
![recepcion_pedido](Imagenes/PR_Stock_Control/recepcion_pedido2.jpg)

- Registre la recepción en **Nuevo Albarán** creando un albarán desde la sección **Almacén**.

![albaran](Imagenes/PR_Stock_Control/albaran.jpg)
![albaran](Imagenes/PR_Stock_Control/albaran2.jpg)

- En ENBLAU, la pestaña **Pendiente de recibir** de **Almacenes** se sincroniza y ya no verás los materiales para ese pedido.
- En **Pedido de Compras**, puedes comprobar la trazabilidad.
- En **enSite**, indique las cantidades recibidas y la ubicación donde se almacenarán (Almacén, Planta, Zona, Subzona…). Luego podrás ver la ubicación de cada material.

![ubicacion](Imagenes/PR_Stock_Control/ubicacion.jpg)
![ubicacion](Imagenes/PR_Stock_Control/ubicacion2.jpg)

> **En caso de materiales dañados u otras incidencias**, puedes adjuntar documentos o capturar fotografías y adjuntarlas al albarán. Luego se podrá revisar desde ENBLAU.

![adjuntos](Imagenes/PR_Stock_Control/adjuntos.jpg)
![adjuntos](Imagenes/PR_Stock_Control/adjuntos2.jpg)

--- -->
<!-- - Desde la app **enSITE**, también se puede buscar por artículos y ver todas las ubicaciones donde está ese artículo. Para luego mover o descontar los articulos.

    ![ver_ubicacion](Imagenes/PR_Stock_Control/ver_ubicacion.jpg) 
    ![mover_salida](Imagenes/PR_Stock_Control/mover_salida.jpg) -->

---


## 6. Producción y enCONTROL

### 6.1. Producción

- Crea proyectos de producción basados en los pedidos de cliente.
  - Crear producción.

    ![crear_produccion](Imagenes/PR_Stock_Control/crear_produccion.jpg)

  - El siguiente paso es **Enviar a producción**.

    ![enviar_produccion](Imagenes/PR_Stock_Control/enviar_produccion.jpg)
    

  - En producción, se puede ver en **stock necesario** los materiales descontados. Se puede descontar manualmente.

    ![stock_necesario](Imagenes/PR_Stock_Control/stock_necesario.jpg)
    ![stock_necesario](Imagenes/PR_Stock_Control/stock_necesario2.jpg)

### 6.2. enCONTROL

- Abre **enCONTROL**. Aparecen los proyectos de producción. Si eres usuario administrador, verás todos los proyectos, si no, solo verás los asignados.
- Abre el **monitor de control**. Puedes abrirlo haciendo doble clic en cualquiera de los filtros (en la cabecera) o haciendo doble clic en el proyecto y seleccionando el puesto de **Control**.

    ![puesto_control](Imagenes/PR_Stock_Control/puesto_control.jpg)

- Cuando se envía a producción (Taller), se coloca en cola de producción en la pestaña de **Gestión de Producción**. El responsable de producción decide la prioridad.

    ![gestion_produccion](Imagenes/PR_Stock_Control/gestion_produccion.jpg)

- Para añadir, solo tienes que arrastrarlo y se abrirá una ventana de **Tarea** para proponer una fecha.

    ![tarea](Imagenes/PR_Stock_Control/tarea.jpg)

- En la pestaña Planificación de producción defines a quien se asigna, arrastrando los proyectos a cada responsable por hacer. Hay que seleccionar el responsable y arrastrar el proyecto (se puede seleccionar más de uno responsable con ctrl + botón derecho). También se puede cambiar la prioridad  de izquierda a derecha y de arriba a abajo:

  ![planificacion_produccion](Imagenes/PR_Stock_Control/planificacion_produccion.jpg)

- En la pestaña Calendario de producción en base a los tiempos de Logikal (en el ejemplo) fechas de entrada y salida de producción.

  ![calendario_produccion](Imagenes/PR_Stock_Control/calendario_produccion.jpg)

- Optimice los procesos según las áreas de producción (corte, mecanizado, ensamblado, etc.). En la pantalla de proyecto con doble clic sobre el proyecto deseado, te abrirá una ventana Seleccione un puesto. (Los puestos se definen como el cliente decida y se verá según el usuario) ejemplos:

  ![seleccion_puesto](Imagenes/PR_Stock_Control/seleccion_puesto.jpg)

- Preparación de Material
    - Todo preparado – Marca los materiales con un check en verde indicando que está preparado.
	- Nada Preparado – Marca los materiales con una X en rojo indicando que no está preparado.
	- Ubicación Material – Según lo tengas configurado enCONTROL, se podría indicar donde ubicar los materiales. Para que se descuente ese material solo de esa ubicación. 
	- Finalizar - seria la fecha real.
	- Documentación - añadir una ruta genérica para añadir lo que quiera. Catálogo, manuales, etc...
	- Comentarios - Se puede añadir comentario y escoger una severidad en el desplegable. El ultimo comentario bueno es el que desbloquea.

      ![preparacion](Imagenes/PR_Stock_Control/preparacion.jpg)

> Todas las pantallas de Puesto son muy similares. Solo que algunas puede que se descuente materiales y otras es a nivel de información. 

- Corte
    - En corte se indica la longitud de la barra y el desperdicio de retales. Se abre una ventana de retales y puede cambiar la longitud según se necesario.
	- Luego en ENBLAU Movimientos de almacén se reflejará una salida de la barra total ej. 6500 y luego una entrado de la del mismo material de ej. 5500 según había indicado en el puesto de corte.
- Mecanizado
	- No se descuenta materiales, simplemente es informativo por tiempo. Contrasta tiempo reales.
- Montaje
    - Se descuenta materiales (accesorios) por cuadro.
- Ajunquillado
    - Se descuenta materiales (Juntas) por cuadro.
- Ensamblado
    - Información del cuadro, pero no se descuenta materiales.
- Herraje
    - Se descuenta materiales (herraje) por hoja.
- Comprobación final
    - No se descuenta materiales.
- Pizarra
    - Muestra la evolución de cada proyecto y su estado.
- Control
    - Abre el monitor Control de proyectos

- Asigne prioridades y recursos para asegurar la fluidez en la producción.

> **Configuración enCONTROL** - Configurar enCONTROL previamente. Para más información, sigue este enlace: [2. Configuración Inicial de enCONTROL](/docs/Configuraciones/2.%20CO_Configuracion_Inicial_enCONTROL.md):
   
---

> **Gestion de Filtros** Usar filtros y filtros personalizados para optimizar la busqueda en los listados. Para más información, sigue este enlace: [4. Gestión de Filtros](/docs/Utilidades/4.UT_Gestion_Filtros.md)

---

## 7. Control de stock y reportes

- Monitorea el stock necesario desde la sección "Producción".
- Identifica materiales reservados y pendientes en tiempo real.
- Genera reportes de inventarios para evaluar el uso de materiales y planificar futuras compras.

---

## 8. Resolución de problemas comunes

- **Error al importar referencias**: Verifica que las referencias estén configuradas en la base de datos.
- **Materiales sobrantes o faltantes**: Asegúrate de registrar correctamente las ubicaciones y cantidades al recibir materiales.
- **Problemas con el layout del almacén**: Revisa la configuración de zonas y ajusta según sea necesario.

---

## 9. Conclusión

Este manual ofrece una guía paso a paso para los procesos principales en el sistema de control de stock. Siguiendo estas instrucciones, los usuarios podrán gestionar eficientemente los inventarios, mejorar la producción y optimizar la relación con proveedores. Para soporte adicional, contacte al administrador del sistema.
